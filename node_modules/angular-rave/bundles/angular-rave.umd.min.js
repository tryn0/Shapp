!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("angular-rave",["exports","@angular/core","@angular/common"],e):e((t=t||self)["angular-rave"]={},t.ng.core,t.ng.common)}(this,(function(t,e,n){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function r(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{a(r.next(t))}catch(t){i(t)}}function s(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(u,s)}a((r=r.apply(t,e||[])).next())}))}function o(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var i=new e.InjectionToken("Rave.PBFPubKey"),u=new e.InjectionToken("Rave.IsDevelopment");var s=function(){function t(t,e){this.PBFPubKey=t,this.isDev=e}return t.prototype.createRaveOptionsObject=function(t){var e={};return e.amount=t.amount,e.PBFPubKey=t.PBFPubKey||this.PBFPubKey,t.payment_method&&(e.payment_method=t.payment_method),t.redirect_url&&(e.redirect_url=t.redirect_url),t.integrity_hash&&(e.integrity_hash=t.integrity_hash),t.pay_button_text&&(e.pay_button_text=t.pay_button_text),t.country&&(e.country=t.country),t.currency&&(e.currency=t.currency),t.custom_description&&(e.custom_description=t.custom_description),t.customer_email&&(e.customer_email=t.customer_email),t.custom_logo&&(e.custom_logo=t.custom_logo),t.custom_title&&(e.custom_title=t.custom_title),t.customer_firstname&&(e.customer_firstname=t.customer_firstname),t.subaccount&&(e.subaccount=t.subaccount),t.customer_lastname&&(e.customer_lastname=t.customer_lastname),t.txref&&(e.txref=t.txref),t.customer_phone&&(e.customer_phone=t.customer_phone),e},t.prototype.loadScript=function(){var t=this;return new Promise((function(e){if("function"!=typeof window.getpaidSetup){var n=window.document.createElement("script");window.document.head.appendChild(n);var r=function(){n.removeEventListener("load",r),e()};n.addEventListener("load",r);var o=t.isDev?"//ravesandboxapi.flutterwave.com/flwv3-pug/getpaidx/api/flwpbf-inline.js":"//api.ravepay.co/flwv3-pug/getpaidx/api/flwpbf-inline.js";n.setAttribute("src",o)}else e()}))},t.prototype.isInvalidOptions=function(t){return t.PBFPubKey||this.PBFPubKey?t.customer_email||t.customer_phone?t.txref?t.currency?t.amount?"":"ANGULAR-RAVE: Amount to charge is required":'ANGULAR-RAVE: Currency is required, Use "NGN" for naira':"ANGULAR-RAVE: A unique transaction reference is required":"ANGULAR-RAVE: Customer email or phone number is required":"ANGULAR-RAVE: Merchant public key is required"},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:String,decorators:[{type:e.Inject,args:[i]}]},{type:Boolean,decorators:[{type:e.Inject,args:[u]}]}]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(i),e.ɵɵinject(u))},token:t,providedIn:"root"}),t}();var a=function(){function t(t){this.raveService=t,this.onclose=new e.EventEmitter,this.callback=new e.EventEmitter,this.init=new e.EventEmitter,this._raveOptions={}}return t.prototype.pay=function(){return r(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return t=!1,this.raveOptions&&Object.keys(this.raveOptions).length>1?(t=this.checkInvalidOptions(this.raveOptions),this.insertRaveOptions(this.raveOptions)):(t=this.checkInvalidOptions(this),this.insertRaveOptions(this)),t?[2]:[4,this.raveService.loadScript()];case 1:return e.sent(),this.paymentSetup=window.getpaidSetup(this._raveOptions),this.init.observers.length>0&&this.init.emit(this.paymentSetup),[2]}}))}))},t.prototype.checkInvalidOptions=function(t){var e=this.raveService.isInvalidOptions(t);return e&&console.error(e),""!==e},t.prototype.insertRaveOptions=function(t){var e=this;this._raveOptions=this.raveService.createRaveOptionsObject(t),this.onclose&&(this._raveOptions.onclose=function(){return e.onclose.emit()}),this._raveOptions.callback=function(t){e.onclose.emit(t),e.autoClose&&e.paymentSetup.close()}},t.prototype.ngOnInit=function(){this.pay()},t.decorators=[{type:e.Component,args:[{selector:"angular-rave",template:"<ng-content></ng-content>"}]}],t.ctorParameters=function(){return[{type:s}]},t.propDecorators={amount:[{type:e.Input}],autoClose:[{type:e.Input}],country:[{type:e.Input}],currency:[{type:e.Input}],custom_description:[{type:e.Input}],custom_logo:[{type:e.Input}],custom_title:[{type:e.Input}],customer_email:[{type:e.Input}],customer_firstname:[{type:e.Input}],customer_lastname:[{type:e.Input}],customer_phone:[{type:e.Input}],integrity_hash:[{type:e.Input}],meta:[{type:e.Input}],pay_button_text:[{type:e.Input}],payment_method:[{type:e.Input}],PBFPubKey:[{type:e.Input}],raveOptions:[{type:e.Input}],redirect_url:[{type:e.Input}],subaccount:[{type:e.Input}],txref:[{type:e.Input}],onclose:[{type:e.Output}],callback:[{type:e.Output}],init:[{type:e.Output}]},t}();var p=function(){function t(t){this.raveService=t,this.raveOptions={},this.onclose=new e.EventEmitter,this.callback=new e.EventEmitter,this.init=new e.EventEmitter,this._raveOptions={}}return t.prototype.buttonClick=function(){this.pay()},t.prototype.pay=function(){return r(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return t=!1,this.raveOptions&&Object.keys(this.raveOptions).length>1?(t=this.checkInvalidOptions(this.raveOptions),this.insertRaveOptions(this.raveOptions)):(t=this.checkInvalidOptions(this),this.insertRaveOptions(this)),t?[2]:[4,this.raveService.loadScript()];case 1:return e.sent(),this.paymentSetup=window.getpaidSetup(this._raveOptions),this.init.observers.length>0&&this.init.emit(this.paymentSetup),[2]}}))}))},t.prototype.checkInvalidOptions=function(t){var e=this.raveService.isInvalidOptions(t);return e&&console.error(e),""!==e},t.prototype.insertRaveOptions=function(t){var e=this;this._raveOptions=this.raveService.createRaveOptionsObject(t),this.onclose&&(this._raveOptions.onclose=function(){return e.onclose.emit()}),this._raveOptions.callback=function(t){e.onclose.emit(t),e.autoClose&&e.paymentSetup.close()}},t.decorators=[{type:e.Directive,args:[{selector:"[angular-rave]"}]}],t.ctorParameters=function(){return[{type:s}]},t.propDecorators={amount:[{type:e.Input}],autoClose:[{type:e.Input}],country:[{type:e.Input}],currency:[{type:e.Input}],custom_description:[{type:e.Input}],custom_logo:[{type:e.Input}],custom_title:[{type:e.Input}],customer_email:[{type:e.Input}],customer_firstname:[{type:e.Input}],customer_lastname:[{type:e.Input}],customer_phone:[{type:e.Input}],integrity_hash:[{type:e.Input}],meta:[{type:e.Input}],pay_button_text:[{type:e.Input}],payment_method:[{type:e.Input}],PBFPubKey:[{type:e.Input}],raveOptions:[{type:e.Input}],redirect_url:[{type:e.Input}],subaccount:[{type:e.Input}],txref:[{type:e.Input}],onclose:[{type:e.Output}],callback:[{type:e.Output}],init:[{type:e.Output}],buttonClick:[{type:e.HostListener,args:["click"]}]},t}();var c=function(){function t(){}return t.forRoot=function(e){return{ngModule:t,providers:[s,{provide:i,useValue:e.key},{provide:u,useValue:e.isTest}]}},t.decorators=[{type:e.NgModule,args:[{imports:[n.CommonModule],declarations:[p,a],exports:[p,a]}]}],t}();t.AngularRaveComponent=a,t.AngularRaveDirective=p,t.AngularRaveModule=c,t.AngularRaveService=s,t.ɵa=i,t.ɵb=u,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=angular-rave.umd.min.js.map